<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Creates a keyboard map"><title>Create Keyboard Map — keyboard_map • eikosany</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Create Keyboard Map — keyboard_map"><meta property="og:description" content="Creates a keyboard map"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">eikosany</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.4.9.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/tetrads-on-37-key-synth.html">Tetrads of the 1-3-5-7-9-11 Eikosany on a 37-key Synthesizer</a>
    <a class="dropdown-item" href="../articles/introduction-to-combination-product-sets.html">Introduction to Combination Product Sets</a>
    <a class="dropdown-item" href="../articles/tuning-the-korg-minilogue-xd-to-the-eikosany.html">Tuning the Korg Minilogue XD to the 1-3-5-7-9-11 Eikosany</a>
  </div>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/AlgoCompSynth/eikosany/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Create Keyboard Map</h1>
      <small class="dont-index">Source: <a href="https://github.com/AlgoCompSynth/eikosany/blob/HEAD/R/cps_functions.R" class="external-link"><code>R/cps_functions.R</code></a></small>
      <div class="d-none name"><code>keyboard_map.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Creates a keyboard map</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">keyboard_map</span><span class="op">(</span><span class="va">scale_table</span>, middle_c_octave <span class="op">=</span> <span class="fl">4</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>scale_table</dt>
<dd><p>a scale table from <code>ps_scale_table</code>,
<code>cps_scale_table</code>, or <code>et_scale_table</code></p></dd>


<dt>middle_c_octave</dt>
<dd><p>octave number for middle C. There are varying
conventions for the octave number for middle C. The default for this
function is 4, but other software can use 3 or even some other number</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>the keyboard map. This is a data.table with eight columns:</p><ul><li><p><code>note_number</code>: the MIDI note number from <code>.NN_MIN</code> through <code>.NN_MAX</code></p></li>
<li><p><code>key_name</code>: note name of the key in 12EDO. This is the key you'd
normally press to play this note number</p></li>
<li><p><code>key_octave</code>: the octave the key normally plays</p></li>
<li><p><code>note_name</code>: the note name from the scale table</p></li>
<li><p><code>ratio_frac</code>: ratio for the note as a vulgar fraction</p></li>
<li><p><code>degree</code>: the scale degree of the note</p></li>
<li><p><code>octave</code>: the octave number of the note</p></li>
<li><p><code>freq</code>: the frequency in Hz</p></li>
<li><p><code>cents</code>: cents above default MIDI note <code>.NN_MIN</code>, which has frequency
<code>.FREQ_MIN</code>.</p></li>
<li><p><code>ref_keyname</code>: some synthesizers, including the Korg Minilogue XD,
let you retune a key as an offset in cents from another reference key.
This column is the name of that reference key.</p></li>
<li><p><code>ref_octave</code>: the octave number of the reference key</p></li>
<li><p><code>ref_offset</code>: the offset in cents from the reference key</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The function is currently hard-coded to compute the map so that
middle C with frequency <code>.FREQ_MIDDLE_C</code>is mapped to MIDI note number
<code>.NN_MIDDLE_C</code> and scale degree 0. With the current constants this is the
same as it is on 12EDO with A440 on note 69. This note is 6000 cents above
MIDI note number 0.</p>
<p>Normally you would only use this to remap a keyboard to a scale with
more than 12 notes per octave. For scales with 12 or fewer notes to the
octave, it's easier to remap all octaves using the offsets provided in
the scale table.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">eikosany</span> <span class="op">&lt;-</span> <span class="fu"><a href="cps_scale_table.html">cps_scale_table</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">eikosany_keyboard_map</span> <span class="op">&lt;-</span> <span class="fu">keyboard_map</span><span class="op">(</span><span class="va">eikosany</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      note_number key_name key_octave note_name ratio_frac degree octave</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   1:           0        C         -1     1x3x5          1      0      1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   2:           1       C#         -1    5x9x11      33/32      1      1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   3:           2        D         -1     1x7x9      21/20      2      1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   4:           3       D#         -1    1x3x11      11/10      3      1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   5:           4        E         -1     3x5x9        9/8      4      1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  ---                                                                   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 124:         123       D#          9    1x3x11      11/10      3      7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 125:         124        E          9     3x5x9        9/8      4      7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 126:         125        F          9     1x5x7        7/6      5      7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 127:         126       F#          9    3x9x11      99/80      6      7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 128:         127        G          9    1x7x11      77/60      7      7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            freq     cents ref_keyname ref_octave ref_offsets</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   1:   32.70320  2400.000           C          2           0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   2:   33.72517  2453.273          C#          2         -47</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   3:   34.33836  2484.467          C#          2         -16</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   4:   35.97352  2565.004           D          2         -35</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   5:   36.79110  2603.910           D          2           4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  ---                                                        </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 124: 2302.30497  9765.004           D          8         -35</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 125: 2354.63009  9803.910           D          8           4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 126: 2441.83861  9866.871          D#          8         -33</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 127: 2590.09310  9968.914           E          8         -31</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 128: 2686.02247 10031.875           E          8          32</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># 12-EDO for sanity check</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">vanilla_keyboard_map</span> <span class="op">&lt;-</span> <span class="fu">keyboard_map</span><span class="op">(</span><span class="fu"><a href="et_scale_table.html">et_scale_table</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      note_number key_name key_octave note_name ratio_frac degree octave</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   1:           0        C         -1         C          1      0     -1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   2:           1       C#         -1     C#|Db  1461/1379      1     -1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   3:           2        D         -1         D  1714/1527      2     -1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   4:           3       D#         -1     D#|Eb  1785/1501      3     -1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   5:           4        E         -1         E    635/504      4     -1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  ---                                                                   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 124:         123       D#          9     D#|Eb  1785/1501      3      9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 125:         124        E          9         E    635/504      4      9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 126:         125        F          9         F  3249/2434      5      9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 127:         126       F#          9     F#|Gb   1393/985      6      9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 128:         127        G          9         G  2213/1477      7      9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>              freq cents ref_keyname ref_octave ref_offsets</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   1:     8.175799     0           C          0           0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   2:     8.661957   100          C#          0           0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   3:     9.177024   200           D          0           0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   4:     9.722718   300          D#          0           0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   5:    10.300861   400           E          0           0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  ---                                                      </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 124:  9956.063479 12300          D#         10           0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 125: 10548.081821 12400           E         10           0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 126: 11175.303406 12500           F         10           0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 127: 11839.821527 12600          F#         10           0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 128: 12543.853951 12700           G         10           0</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># check middle C setting</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">eikosany_keyboard_map_c3</span> <span class="op">&lt;-</span></span></span>
<span class="r-in"><span>    <span class="fu">keyboard_map</span><span class="op">(</span><span class="fu"><a href="cps_scale_table.html">cps_scale_table</a></span><span class="op">(</span><span class="op">)</span>, middle_c_octave <span class="op">=</span> <span class="fl">3</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      note_number key_name key_octave note_name ratio_frac degree octave</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   1:           0        C         -2     1x3x5          1      0      0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   2:           1       C#         -2    5x9x11      33/32      1      0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   3:           2        D         -2     1x7x9      21/20      2      0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   4:           3       D#         -2    1x3x11      11/10      3      0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   5:           4        E         -2     3x5x9        9/8      4      0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  ---                                                                   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 124:         123       D#          8    1x3x11      11/10      3      6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 125:         124        E          8     3x5x9        9/8      4      6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 126:         125        F          8     1x5x7        7/6      5      6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 127:         126       F#          8    3x9x11      99/80      6      6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 128:         127        G          8    1x7x11      77/60      7      6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            freq     cents ref_keyname ref_octave ref_offsets</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   1:   32.70320  2400.000           C          2           0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   2:   33.72517  2453.273          C#          2         -47</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   3:   34.33836  2484.467          C#          2         -16</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   4:   35.97352  2565.004           D          2         -35</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   5:   36.79110  2603.910           D          2           4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  ---                                                        </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 124: 2302.30497  9765.004           D          8         -35</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 125: 2354.63009  9803.910           D          8           4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 126: 2441.83861  9866.871          D#          8         -33</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 127: 2590.09310  9968.914           E          8         -31</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 128: 2686.02247 10031.875           E          8          32</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by M. Edward (Ed) Borasky.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

